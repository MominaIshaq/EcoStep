<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EcoStep â€¢ Results</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="./manifest.webmanifest" type="application/manifest+json">
    <link rel="canonical" href="./results.html">
</head>
<body data-page="results">
    <canvas id="particlesCanvas" aria-hidden="true"></canvas>
    <div id="pageTransition" aria-hidden="true"></div>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo"><i class="fas fa-leaf"></i><span>EcoStep</span></div>
            <ul class="nav-menu">
                <li><a href="index.html" class="nav-link">Home</a></li>
                <li><a href="about.html" class="nav-link">About</a></li>
                <li><a href="dashboard.html" class="nav-link">Dashboard</a></li>
                <li><a href="results.html" class="nav-link">Results</a></li>
                <li><a href="hub.html" class="nav-link">Hub</a></li>
                <li><a href="community.html" class="nav-link">Community</a></li>
            </ul>
            <div class="nav-actions">
                <div id="authControls"></div>
            </div>
        </div>
    </nav>

    <main class="container" style="padding-top:100px;padding-bottom:60px">
        <section id="results" class="results-section">
            <div class="results-container">
                <h2 id="resultTitle" class="section-title">Your Results</h2>
                <p id="resultDescription" class="section-subtitle">Your eco score and insights below</p>
                <div class="score-display">
                    <div class="score-circle">
                        <div class="score-number" id="scoreNumber">0</div>
                        <div class="score-label">Carbon Score</div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="circular-meter">
                        <svg viewBox="0 0 120 120">
                            <circle cx="60" cy="60" r="54" stroke="#e2e8f0" stroke-width="12" fill="none"></circle>
                            <circle id="circularProgress" cx="60" cy="60" r="54" stroke="#38a169" stroke-width="12" fill="none" stroke-linecap="round" style="transition: stroke-dashoffset 1.2s ease"></circle>
                        </svg>
                        <div class="circular-percent" id="circularPercent">0%</div>
                    </div>
                </div>
                <div id="treeVisualization" class="tree-visualization"></div>
                <div id="leafField" class="leaf-field"></div>
                <div class="viz-grid">
                    <div class="viz-card"><i class="fas fa-tree"></i><div><div class="viz-label">Trees saved</div><div class="viz-value" id="vizTrees">0</div></div></div>
                    <div class="viz-card"><i class="fas fa-droplet"></i><div><div class="viz-label">Water saved (L)</div><div class="viz-value" id="vizWater">0</div></div></div>
                    <div class="viz-card"><i class="fas fa-bolt"></i><div><div class="viz-label">Energy saved (kWh)</div><div class="viz-value" id="vizEnergy">0</div></div></div>
                </div>
                <div class="share-download" style="margin-top:2rem;text-align:center">
                    <button class="nav-btn" id="shareBtn"><i class="fas fa-share"></i> Share</button>
                    <button class="nav-btn" id="downloadPdfBtn"><i class="fas fa-file-pdf"></i> Download PDF</button>
                </div>
            </div>
        </section>
    </main>

    <script src="auth.js"></script>
    <script src="script.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', ()=>{
        if (window.EcoAuth) EcoAuth.renderAuthUI();
        const persist = ()=>{
          try {
            const score = parseInt(localStorage.getItem('eco_score')||'0',10);
            const max = parseInt(localStorage.getItem('eco_max')||'15',10);
            const categories = JSON.parse(localStorage.getItem('eco_answers')||'{}');
            if (window.EcoAuth) EcoAuth.saveResult({ score, max, categories });
          } catch {}
        };
        setTimeout(persist, 1200);
      });
    </script>
</body>
</html>
